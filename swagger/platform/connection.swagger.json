{
  "swagger": "2.0",
  "info": {
    "title": "platform/connection.proto",
    "version": "version not set"
  },
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/connections": {
      "get": {
        "summary": "List all connections",
        "operationId": "ConnectionService_List",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformListConnectionsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "tenantId",
            "description": "Optional tenant ID to filter connections.",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "consumerId",
            "description": "Optional consumer ID to filter connections.",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "limit",
            "description": "Maximum number of connections to return.",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "offset",
            "description": "Offset for pagination.",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "status",
            "description": "Optional status to filter connections.\n\n - CONNECTION_STATUS_UNKNOWN: Unknown connection status.\n - CONNECTION_STATUS_ACTIVE: Active connection.\n - CONNECTION_STATUS_DISCONNECTED: Disconnected connection.\n - CONNECTION_STATUS_DISABLED: Disabled connection.",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "CONNECTION_STATUS_UNKNOWN",
              "CONNECTION_STATUS_ACTIVE",
              "CONNECTION_STATUS_DISCONNECTED",
              "CONNECTION_STATUS_DISABLED"
            ],
            "default": "CONNECTION_STATUS_UNKNOWN"
          },
          {
            "name": "connectionType",
            "description": "Optional connection type to filter connections.\n\n - CONNECTION_TYPE_UNKNOWN: Unknown connection type.\n - CONNECTION_TYPE_WATER: Water connection.\n - CONNECTION_TYPE_GAS: Gas connection.\n - CONNECTION_TYPE_ELECTRICITY: Electricity connection.",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "CONNECTION_TYPE_UNKNOWN",
              "CONNECTION_TYPE_WATER",
              "CONNECTION_TYPE_GAS",
              "CONNECTION_TYPE_ELECTRICITY"
            ],
            "default": "CONNECTION_TYPE_UNKNOWN"
          },
          {
            "name": "category",
            "description": "Optional category to filter connections.\n\n - CONNECTION_CATEGORY_UNKNOWN: Unknown connection category.\n - CONNECTION_CATEGORY_DOMESTIC: Domestic connection category.\n - CONNECTION_CATEGORY_COMMERCIAL: Commercial connection category.\n - CONNECTION_CATEGORY_INDUSTRIAL: Industrial connection category.",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "CONNECTION_CATEGORY_UNKNOWN",
              "CONNECTION_CATEGORY_DOMESTIC",
              "CONNECTION_CATEGORY_COMMERCIAL",
              "CONNECTION_CATEGORY_INDUSTRIAL"
            ],
            "default": "CONNECTION_CATEGORY_UNKNOWN"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      },
      "post": {
        "summary": "Create a new connection for a consumer.",
        "operationId": "ConnectionService_Create",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformCreateConnectionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/platformCreateConnectionRequest"
            }
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{connection.id}": {
      "put": {
        "summary": "Update an existing connection for a consumer.",
        "operationId": "ConnectionService_Update",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "connection.id",
            "description": "Unique identifier for the connection.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/platformUpdateConnectionRequest"
            }
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{connectionId}": {
      "delete": {
        "summary": "Delete a connection for a consumer.",
        "operationId": "ConnectionService_Delete",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "connectionId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{connectionId}/meters": {
      "get": {
        "summary": "List all meter connections.",
        "operationId": "ConnectionService_ListMeterConnections",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformListMeterConnectionsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "connectionId",
            "description": "Connection ID to filter meter connections.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "limit",
            "description": "Maximum number of meter connections to return.",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "offset",
            "description": "Offset for pagination.",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "meterStatus",
            "description": "Optional status to filter meter connections.\n\n - METER_STATUS_UNKNOWN: Unknown meter status.\n - METER_STATUS_ACTIVE: Active meter.\n - METER_STATUS_INACTIVE: Inactive meter.\n - METER_STATUS_REMOVED: Removed meter.",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "METER_STATUS_UNKNOWN",
              "METER_STATUS_ACTIVE",
              "METER_STATUS_INACTIVE",
              "METER_STATUS_REMOVED"
            ],
            "default": "METER_STATUS_UNKNOWN"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{connectionId}/meters/{meterConnectionId}": {
      "get": {
        "summary": "Get a meter connection by ID.",
        "operationId": "ConnectionService_GetMeterConnection",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformGetMeterConnectionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "connectionId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "meterConnectionId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      },
      "delete": {
        "summary": "Remove a meter from a connection.",
        "operationId": "ConnectionService_RemoveMeterFromConnection",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "connectionId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "meterConnectionId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{id}": {
      "get": {
        "summary": "Get the connection details for a given Connection ID.",
        "operationId": "ConnectionService_Get",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformGetConnectionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{meterConnection.connectionId}/meters": {
      "post": {
        "summary": "Add a meter to a connection.",
        "operationId": "ConnectionService_AddMeterToConnection",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/platformAddMeterToConnectionResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "meterConnection.connectionId",
            "description": "ID of the connection this meter is associated with.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/platformAddMeterToConnectionRequest"
            }
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    },
    "/api/connections/{meterConnection.connectionId}/meters/{meterConnection.id}": {
      "put": {
        "summary": "Update a meter connection.",
        "operationId": "ConnectionService_UpdateMeterConnection",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/runtimeError"
            }
          }
        },
        "parameters": [
          {
            "name": "meterConnection.connectionId",
            "description": "ID of the connection this meter is associated with.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "meterConnection.id",
            "description": "Unique identifier for the MeterConnection.",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/platformUpdateMeterConnectionRequest"
            }
          }
        ],
        "tags": [
          "ConnectionService"
        ]
      }
    }
  },
  "definitions": {
    "platformAddMeterToConnectionRequest": {
      "type": "object",
      "properties": {
        "meterConnection": {
          "$ref": "#/definitions/platformMeterConnection"
        }
      },
      "description": "Request message for adding a meter to a connection."
    },
    "platformAddMeterToConnectionResponse": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        }
      },
      "description": "Response message for adding a meter to a connection."
    },
    "platformConnection": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the connection."
        },
        "consumerId": {
          "type": "string",
          "description": "ID of the consumer this connection belongs to."
        },
        "isAssociated": {
          "type": "boolean",
          "description": "Flag indicating if the connection is associated with an installation site."
        },
        "connectionType": {
          "$ref": "#/definitions/platformConnectionType",
          "description": "Type of connection (e.g., water, gas, electricity)."
        },
        "connectionNumber": {
          "type": "string",
          "description": "Connection or service number."
        },
        "category": {
          "$ref": "#/definitions/platformConnectionCategory",
          "description": "Category of the connection (e.g., domestic, commercial, industrial)."
        },
        "status": {
          "$ref": "#/definitions/platformConnectionStatus",
          "description": "Status of the connection (e.g., active, disconnected, disabled)."
        },
        "tenantId": {
          "type": "string",
          "description": "Tenant ID (UUID) to which the connection belongs."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the connection was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the connection was last updated."
        }
      },
      "description": "Connection represents a connection configuration for a consumer."
    },
    "platformConnectionCategory": {
      "type": "string",
      "enum": [
        "CONNECTION_CATEGORY_UNKNOWN",
        "CONNECTION_CATEGORY_DOMESTIC",
        "CONNECTION_CATEGORY_COMMERCIAL",
        "CONNECTION_CATEGORY_INDUSTRIAL"
      ],
      "default": "CONNECTION_CATEGORY_UNKNOWN",
      "description": " - CONNECTION_CATEGORY_UNKNOWN: Unknown connection category.\n - CONNECTION_CATEGORY_DOMESTIC: Domestic connection category.\n - CONNECTION_CATEGORY_COMMERCIAL: Commercial connection category.\n - CONNECTION_CATEGORY_INDUSTRIAL: Industrial connection category."
    },
    "platformConnectionStatus": {
      "type": "string",
      "enum": [
        "CONNECTION_STATUS_UNKNOWN",
        "CONNECTION_STATUS_ACTIVE",
        "CONNECTION_STATUS_DISCONNECTED",
        "CONNECTION_STATUS_DISABLED"
      ],
      "default": "CONNECTION_STATUS_UNKNOWN",
      "description": " - CONNECTION_STATUS_UNKNOWN: Unknown connection status.\n - CONNECTION_STATUS_ACTIVE: Active connection.\n - CONNECTION_STATUS_DISCONNECTED: Disconnected connection.\n - CONNECTION_STATUS_DISABLED: Disabled connection."
    },
    "platformConnectionType": {
      "type": "string",
      "enum": [
        "CONNECTION_TYPE_UNKNOWN",
        "CONNECTION_TYPE_WATER",
        "CONNECTION_TYPE_GAS",
        "CONNECTION_TYPE_ELECTRICITY"
      ],
      "default": "CONNECTION_TYPE_UNKNOWN",
      "description": " - CONNECTION_TYPE_UNKNOWN: Unknown connection type.\n - CONNECTION_TYPE_WATER: Water connection.\n - CONNECTION_TYPE_GAS: Gas connection.\n - CONNECTION_TYPE_ELECTRICITY: Electricity connection."
    },
    "platformCreateConnectionRequest": {
      "type": "object",
      "properties": {
        "connection": {
          "$ref": "#/definitions/platformConnection"
        }
      },
      "description": "Request message for creating a connection."
    },
    "platformCreateConnectionResponse": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        }
      },
      "description": "Response message for creating a connection."
    },
    "platformGetConnectionResponse": {
      "type": "object",
      "properties": {
        "connection": {
          "$ref": "#/definitions/platformConnection"
        }
      },
      "description": "Response message for getting a connection."
    },
    "platformGetMeterConnectionResponse": {
      "type": "object",
      "properties": {
        "meterConnection": {
          "$ref": "#/definitions/platformMeterConnection"
        }
      },
      "description": "Response message for getting a MeterConnection."
    },
    "platformListConnectionsResponse": {
      "type": "object",
      "properties": {
        "totalCount": {
          "type": "integer",
          "format": "int64",
          "description": "Total number of connections matching the criteria."
        },
        "connections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/platformConnection"
          },
          "description": "List of connections."
        }
      },
      "description": "Response message for listing connections."
    },
    "platformListMeterConnectionsResponse": {
      "type": "object",
      "properties": {
        "totalCount": {
          "type": "integer",
          "format": "int64",
          "description": "Total number of meter connections matching the criteria."
        },
        "meterConnections": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/platformMeterConnection"
          },
          "description": "List of meter connections."
        }
      },
      "description": "Response message for listing MeterConnections."
    },
    "platformMeterConnection": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the MeterConnection."
        },
        "installedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the meter was installed."
        },
        "removedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the meter was removed (nullable)."
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the meter was created."
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp when the meter was updated."
        },
        "connectionId": {
          "type": "string",
          "description": "ID of the connection this meter is associated with."
        },
        "meterEui": {
          "type": "string",
          "description": "Meter EUI (Extended Unique Identifier)."
        },
        "meterSerialNumber": {
          "type": "string",
          "description": "Meter serial number."
        },
        "meterStatus": {
          "$ref": "#/definitions/platformMeterStatus",
          "description": "Status of the meter (e.g., active, inactive)."
        },
        "lastKnownReading": {
          "type": "number",
          "format": "double",
          "description": "Last known reading from the meter."
        },
        "firstBillableReading": {
          "type": "number",
          "format": "double",
          "description": "First billable reading from the meter."
        }
      },
      "description": "MeterConnection represents a meter associated with a connection."
    },
    "platformMeterStatus": {
      "type": "string",
      "enum": [
        "METER_STATUS_UNKNOWN",
        "METER_STATUS_ACTIVE",
        "METER_STATUS_INACTIVE",
        "METER_STATUS_REMOVED"
      ],
      "default": "METER_STATUS_UNKNOWN",
      "description": " - METER_STATUS_UNKNOWN: Unknown meter status.\n - METER_STATUS_ACTIVE: Active meter.\n - METER_STATUS_INACTIVE: Inactive meter.\n - METER_STATUS_REMOVED: Removed meter."
    },
    "platformUpdateConnectionRequest": {
      "type": "object",
      "properties": {
        "connection": {
          "$ref": "#/definitions/platformConnection"
        }
      },
      "description": "Request message for updating a connection."
    },
    "platformUpdateMeterConnectionRequest": {
      "type": "object",
      "properties": {
        "meterConnection": {
          "$ref": "#/definitions/platformMeterConnection"
        }
      },
      "description": "Request message for updating a MeterConnection."
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "typeUrl": {
          "type": "string"
        },
        "value": {
          "type": "string",
          "format": "byte"
        }
      }
    },
    "runtimeError": {
      "type": "object",
      "properties": {
        "error": {
          "type": "string"
        },
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
