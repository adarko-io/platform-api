syntax = "proto3";

package platform;

option go_package = "github.com/adarko-io/platform-api/go/v4/platform";

import "google/api/annotations.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";
import "platform/shared_enums.proto";
import "google/protobuf/struct.proto";

service ConsumerService {
  // Create a new consumer.
  rpc Create(CreateConsumerRequest) returns (CreateConsumerResponse) {
    option (google.api.http) = {
      post: "/api/consumers"
      body: "*"
    };
  }

  // Get consumer details by ID.
  rpc Get(GetConsumerRequest) returns (GetConsumerResponse) {
    option (google.api.http) = {
      get: "/api/consumers/{id}"
    };
  }

  // Update an existing consumer.
  rpc Update(UpdateConsumerRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      put: "/api/consumers/{consumer.id}"
      body: "*"
    };
  }

  // Delete a consumer by ID.
  rpc Delete(DeleteConsumerRequest) returns (google.protobuf.Empty) {
    option (google.api.http) = {
      delete: "/api/consumers/{id}"
    };
  }

  // List consumers with optional filtering and search.
  rpc List(ListConsumersRequest) returns (ListConsumersResponse) {
    option (google.api.http) = {
      get: "/api/consumers"
    };
  }
}

message Consumer {
  // Consumer ID (UUID).
  string id = 1;

  // Consumer Name
  string name = 2;

  // Consumer Mobile Number
  string mobile_number = 3;

  // Consumer Mobile Country Code
  string mobile_country_code = 4;


  // Consumer Status
  ConsumerStatus status = 11; // ACTIVE/INACTIVE/TERMINATED

  // Additional notes about the consumer
  string note = 12;

  // User who created the consumer
  string created_by = 13;

  // User who last updated the consumer
  string updated_by = 14;

  // Creation timestamp
  google.protobuf.Timestamp created_at = 15;

  // Last update timestamp
  google.protobuf.Timestamp updated_at = 16;

  // Consumer number (unique identifier)
  uint64 consumer_number = 17;

  // Tags associated with the consumer.
  map<string, string> tags = 18;

  // Tenant ID (UUID) to which the consumer belongs.
  string tenant_id = 19;
}

message CreateConsumerRequest {
  Consumer consumer = 1;
}

message CreateConsumerResponse {
  // Consumer ID (UUID).
  string id = 1;
}

message GetConsumerRequest {
  // Consumer ID (UUID).
  string id = 1;
}

message GetConsumerResponse {
  Consumer consumer = 1;
}

message UpdateConsumerRequest {
  Consumer consumer = 1;
}

message DeleteConsumerRequest {
  // Consumer ID (UUID).
  string id = 1;
}

message ListConsumersRequest {
  // Pagination limit.
  int32 limit = 1;

  // Pagination offset.
  int32 offset = 2;

  // Tenant ID (UUID) to filter consumers.
  string tenant_id = 3;

  // Searches across name, email, mobile number, and consumer number.
  string search = 4;
}

message ListConsumersResponse {
  // Total number of Consumers matching the filters.
  int64 total_count = 1;

  // Result-set.
  repeated Consumer result = 2;
}