syntax = "proto3";

package platform;

option go_package = "github.com/adarko-io/platform-api/go/v4/platform";

// Shared enum definitions to avoid conflicts across services.
// This file contains all common enums used by multiple services.

// Transport protocol enumeration - unified for inventory and data services.
enum TransportProtocol {
  // Unknown protocol.
  TRANSPORT_PROTOCOL_UNKNOWN = 0;
  
  // LoRaWAN.
  TRANSPORT_LORAWAN = 1;
  
  // HTTP/HTTPS over  (2G/3G/4G/5G/NB-IoT/LTE-M/WIFI).
  TRANSPORT_HTTP = 2;
  
  // MQTT over  (2G/3G/4G/5G/NB-IoT/LTE-M/WIFI).
  TRANSPORT_MQTT = 3;
  
  // TCP over  (2G/3G/4G/5G/NB-IoT/LTE-M/WIFI).
  TRANSPORT_TCP = 4;
  
  // UDP over  (2G/3G/4G/5G/NB-IoT/LTE-M/WIFI).
  TRANSPORT_UDP = 5;
  
  // CoAP over  (2G/3G/4G/5G/NB-IoT/LTE-M/WIFI).
  TRANSPORT_COAP = 6;
    
  // WebSocket.
  TRANSPORT_WEBSOCKET = 7;
}

// Communication mode enumeration - unified for inventory and other services.
enum DeviceType {
  // Unknown device type.
  DEVICE_TYPE_UNKNOWN = 0;

  // LoRaWAN device type.
  DEVICE_TYPE_LORAWAN_DEVICE = 1;

  // Cellular MQTT device type.
  DEVICE_TYPE_CELLULAR_GSM = 2;

  // Cellular TCP device type.
  DEVICE_TYPE_CELLULAR_LTE = 3;

  // Cellular UDP device type.
  DEVICE_TYPE_CELLULAR_GSM_LTE = 4;

  // Gateway device type.
  DEVICE_TYPE_GATEWAY = 5;

  // LoRaWAN Gateway device type.
  DEVICE_TYPE_LORAWAN_GATEWAY = 6;
}

// Location source enumeration - unified across all services.
enum LocationSource {
  // Unknown location source.
  LOCATION_SOURCE_UNKNOWN = 0;
  
  // GPS coordinates.
  LOCATION_SOURCE_GPS = 1;
  
  // Manually configured.
  LOCATION_SOURCE_MANUAL = 2;
  
  // Calculated via triangulation.
  LOCATION_SOURCE_TRIANGULATION = 3;
  
  // WiFi-based location.
  LOCATION_SOURCE_WIFI = 4;

  // Manual override.
  LOCATION_SOURCE_MANUAL_OVERRIDE = 5;

  // Configuration-based.
  LOCATION_SOURCE_CONFIG = 6;
  
  // GEO resolver TDOA.
  LOCATION_SOURCE_GEO_RESOLVER_TDOA = 7;
  
  // GEO resolver RSSI.
  LOCATION_SOURCE_GEO_RESOLVER_RSSI = 8;
  
  // GEO resolver GNSS.
  LOCATION_SOURCE_GEO_RESOLVER_GNSS = 9;
  
  // GEO resolver WiFi.
  LOCATION_SOURCE_GEO_RESOLVER_WIFI = 10;
}

// Inventory status enumeration.
enum InventoryStatus {
  // Device in inventory, not yet onboarded.
  INVENTORY_STATUS_INVENTORY = 0;

  // Device onboarded to platform.
  INVENTORY_STATUS_ONBOARDED = 1;

  // Device provisioned and active.
  INVENTORY_STATUS_PROVISIONED = 2;

  // Device decommissioned.
  INVENTORY_STATUS_DECOMMISSIONED = 3;

  // Device reported as faulty.
  INVENTORY_STATUS_FAULTY = 4;

  // Device lost or stolen.
  INVENTORY_STATUS_LOST = 5;
}

// Downlink delivery mode enumeration.
enum DownlinkMode {
  // Immediate downlink (for always-on devices).
  DOWNLINK_MODE_IMMEDIATE = 0;
  
  // Queued downlink (for battery-powered devices, sent on next uplink).
  DOWNLINK_MODE_QUEUED = 1;
  
  // Scheduled downlink (sent at specific time).
  DOWNLINK_MODE_SCHEDULED = 2;
}


// Aggregation type for time-series data.
enum AggregationType {
  // No aggregation (raw data).
  AGGREGATION_TYPE_NONE = 0;
  
  // Average values.
  AGGREGATION_TYPE_AVG = 1;
  
  // Minimum values.
  AGGREGATION_TYPE_MIN = 2;
  
  // Maximum values.
  AGGREGATION_TYPE_MAX = 3;
  
  // Sum of values.
  AGGREGATION_TYPE_SUM = 4;
  
  // Count of data points.
  AGGREGATION_TYPE_COUNT = 5;
  
  // First value in time window.
  AGGREGATION_TYPE_FIRST = 6;
  
  // Last value in time window.
  AGGREGATION_TYPE_LAST = 7;
}

// Time interval for aggregation.
enum TimeInterval {
  // 1 minute intervals.
  TIME_INTERVAL_MINUTE = 0;
  
  // 5 minute intervals.
  TIME_INTERVAL_MINUTE_5 = 1;
  
  // 15 minute intervals.
  TIME_INTERVAL_MINUTE_15 = 2;
  
  // 30 minute intervals.
  TIME_INTERVAL_MINUTE_30 = 3;
  
  // 1 hour intervals.
  TIME_INTERVAL_HOUR = 4;
  
  // 6 hour intervals.
  TIME_INTERVAL_HOUR_6 = 5;
  
  // 12 hour intervals.
  TIME_INTERVAL_HOUR_12 = 6;
  
  // 1 day intervals.
  TIME_INTERVAL_DAY = 7;
  
  // 1 week intervals.
  TIME_INTERVAL_WEEK = 8;
  
  // 1 month intervals.
  TIME_INTERVAL_MONTH = 9;
}

enum AssetType {
  // Unknown asset type.
  ASSET_TYPE_UNKNOWN = 0;
  
  // AMR Water meter Inductive.
  ASSET_TYPE_WATER_METER=1;
  
  // Energy Meter device.
  ASSET_TYPE_ENERGY_METER = 5;
  
  // GAS Meter device.
  ASSET_TYPE_GAS_METER = 6;
  
  // GPS Tracker device.
  ASSET_TYPE_GPS_TRACKER = 7;

  // Gateway device.
  ASSET_TYPE_GATEWAY = 8;
}


//
// Asset sub-type enumeration.
// AssetSubType defines specific sub-types for various asset categories. which will help for UI representation, filtering, data decode etc.
//it will be manufacturer and model specific.
//Ex : ASSET_SUB_TYPE_WATER_METER_INDUCTIVE_mfr_model = ASSET_SUB_TYPE_WATER_METER_INDUCTIVE_AIL_V1
//DO NOT CHANGE THE EXISTING VALUES, APPEND NEW VALUES AT THE END TO AVOID CONFLICTS
enum AssetSubType {
  // Unknown asset type.
  ASSET_SUB_TYPE_UNKNOWN = 0;

  // ASSET_SUB_TYPE_WATER_METER_INDUCTIVE    = 1;

  // ASSET_SUB_TYPE_WATER_METER_MAGNETIC      = 2;

  // ASSET_SUB_TYPE_WATER_METER_ULTRASONIC    = 3;

  // ASSET_SUB_TYPE_WATER_METER_PULSE     = 4;

  // ASSET_SUB_TYPE_ENERGY_METER_SINGLE_PHASE = 5;

  // ASSET_SUB_TYPE_ENERGY_METER_THREE_PHASE  = 6;

  // ASSET_SUB_TYPE_GAS_METER                 = 7;

  // ASSET_SUB_TYPE_GPS_TRACKER               = 8;

//Outdoor LoRaWAN Gateway - CPI ODU
  ASSET_SUB_TYPE_LORAWAN_GATEWAY_CPI_ODU       = 1001;
//Indoor LoRaWAN Gateway - CPI IDU
  ASSET_SUB_TYPE_LORAWAN_GATEWAY_CPI_IDU = 1002;
//ADARKO Inductive Water Meter AMR - V1
  ASSET_SUB_TYPE_WATER_METER_AMR_INDUCTIVE_AIL_V1 = 1003;
//CPI Inductive Water Meter AMR - V1
  ASSET_SUB_TYPE_WATER_METER_AMR_INDUCTIVE_CPI_V1 = 1004;
//ADARKO Pulse Water Meter AMR - V1
  ASSET_SUB_TYPE_WATER_METER_AMR_PULSE_AIL_V1 = 1005;
//ADARKO Magnetic Water Meter AMR - V1
  ASSET_SUB_TYPE_WATER_METER_AMR_MAGNETIC_AIL_V1 = 1006;

 }

// Field type enumeration for data aggregation.
// Determines how aggregation functions should be applied to different field types.
enum FieldType {
  // Unknown field type - defaults to VARIABLE behavior.
  FIELD_TYPE_UNKNOWN = 0;
  
  // Cumulative/monotonic fields (e.g., accumulated_volume_m3, total_energy_kwh).
  // For these fields:
  // - MIN/MAX/AVG/SUM calculate differences between readings (consumption)
  // - NONE returns raw accumulated values with gap filling
  FIELD_TYPE_CUMULATIVE = 1;
  
  // Variable/instantaneous fields (e.g., battery_voltage, temperature, pressure).
  // For these fields:
  // - MIN returns minimum value in time period
  // - MAX returns maximum value in time period  
  // - AVG returns average value in time period
  // - SUM returns sum of values (rarely useful)
  // - NONE returns raw values with gap filling
  FIELD_TYPE_VARIABLE = 2;
}

message Location {
  // Latitude.
  double latitude = 1;

  // Longitude.
  double longitude = 2;

  // Altitude.
  double altitude = 3;

  // Location source.
  LocationSource source = 4;

  // Accuracy.
  float accuracy = 5;
}